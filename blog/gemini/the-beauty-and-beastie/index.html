<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>The Beauty and Beastie | Vintrlik Blog</title>
<meta name="keywords" content="">
<meta name="description" content="As I mentioned in my last article I have a FreeBSD box running FTP as a file server. I use for my personal media, source codes, scripts and share it like this between all my other computers. While this site is (as of yet) running on Debian I have considered FreeBSD to be much more pleasant on the server side of things.
I have however never run FreeBSD as a daily driver desktop and decided that it was time to give that a go.">
<meta name="author" content="">
<link rel="canonical" href="https://tadeas-vintrlik.github.io/blog/gemini/the-beauty-and-beastie/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css" integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://tadeas-vintrlik.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://tadeas-vintrlik.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://tadeas-vintrlik.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://tadeas-vintrlik.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://tadeas-vintrlik.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="The Beauty and Beastie" />
<meta property="og:description" content="As I mentioned in my last article I have a FreeBSD box running FTP as a file server. I use for my personal media, source codes, scripts and share it like this between all my other computers. While this site is (as of yet) running on Debian I have considered FreeBSD to be much more pleasant on the server side of things.
I have however never run FreeBSD as a daily driver desktop and decided that it was time to give that a go." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tadeas-vintrlik.github.io/blog/gemini/the-beauty-and-beastie/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-09-04T14:19:08&#43;02:00" />
<meta property="article:modified_time" content="2021-09-04T14:19:08&#43;02:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="The Beauty and Beastie"/>
<meta name="twitter:description" content="As I mentioned in my last article I have a FreeBSD box running FTP as a file server. I use for my personal media, source codes, scripts and share it like this between all my other computers. While this site is (as of yet) running on Debian I have considered FreeBSD to be much more pleasant on the server side of things.
I have however never run FreeBSD as a daily driver desktop and decided that it was time to give that a go."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Blogs",
      "item": "https://tadeas-vintrlik.github.io/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "The Beauty and Beastie",
      "item": "https://tadeas-vintrlik.github.io/blog/gemini/the-beauty-and-beastie/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "The Beauty and Beastie",
  "name": "The Beauty and Beastie",
  "description": "As I mentioned in my last article I have a FreeBSD box running FTP as a file server. I use for my personal media, source codes, scripts and share it like this between all my other computers. While this site is (as of yet) running on Debian I have considered FreeBSD to be much more pleasant on the server side of things.\nI have however never run FreeBSD as a daily driver desktop and decided that it was time to give that a go.",
  "keywords": [
    
  ],
  "articleBody": "As I mentioned in my last article I have a FreeBSD box running FTP as a file server. I use for my personal media, source codes, scripts and share it like this between all my other computers. While this site is (as of yet) running on Debian I have considered FreeBSD to be much more pleasant on the server side of things.\nI have however never run FreeBSD as a daily driver desktop and decided that it was time to give that a go.\nMy history with *BSD Quite some time after using Linux, actually realising that it is GNU/Linux and what GNU is and the entire history of UNIX-like systems have I found out about BSD (Berkeley Software Distribution). It was an operating system which soon spawned a number of descendant systems. FreeBSD being one of them.\nThere are of course many other but three others in particular I consider worth mentioning OpenBSD, NetBSD and DragonflyBSD. Dragonfly focuses on multi-threaded performance and was forked from FreeBSD over a dispute about it. It also uses a modern file-system called HAMMER. I personally never used it. Then there is NetBSD which focuses on clean code and portability to many architectures being used in embedded devices frequently. I also have never used it. Then there is OpenBSD which was forked from NetBSD and its first and foremost goal is security. They make the system secure to the point of being unusable sometimes. Multi-threading is disabled by default, the kernel is re-linked randomly every time to avoid exploits and so on. I did run it for a little while on my thinkpad laptop but the lack of software and the performance made me jump right back after about a month.\nWhy FreeBSD? I believe that it is the most supported and most suited to be used as a desktop out of all of the *BSDs. Why use BSD over GNU/Linux? My biggest reason is probably simplicity. Not as in user friendliness but the pure essence of UNIX. Keeping it simple to the core.\nInit system I don’t exactly hate SystemD as some people do. It can be pretty decent for some very intricate server stuff. But for the majority of things it is an absolute overkill and I’ll gladly take something else. FreeBSD uses a very simple and minimalist init system called just ‘init’. It uses scripts located in the ‘/etc/rc.d’ folder and simply starts processes as it is supposed to do. It does very little else. There is simple script called ‘service’ used to control different services and that’s it.\nDirectory hierarchy The directory hierarchy in GNU/Linux can be a little messy at times. It is not quite so bad as to interfere with work but after seeing the BSD hierarchy it certainly leaves a bit to be desired. There is a total of 44 files in the FreeBSD ‘/bin’ folder. Only the absolutes necessities to keep the system running. The rest can be found in ‘/usr/bin’ and ‘/usr/local/bin’ where all the user executables are kept. Does this actually improve anything? Not by much but it is much cleaner an everything has its place.\nIt’s basically like Linux, right? Well yes and no. For the most part it will feel very familiar but it is the little differences that can knock you out of the balance sometimes.\nWhere there’s a shell, there’s a way True enough as FreeBSD runs a rewrite of the original Bourne Shell. You might be familiar with the Bourne Again Shell or bash for short. Well this is sh. The portable POSIX shell in all its glory. There is also csh or C Shell out of the box. While I find sh to be quite enough for me even for interactive use I can understand some people might want more comfort. It is of course very easy to install others: Bash, Zsh and should you want it Fish (God forbid). Speaking of which…\nPackage management The FreeBSD package manager is called ‘pkg’. To install a package you type ‘pkg install name’ to search ‘pkg search name’ to remove ‘pkg remove name’. You get the idea. As simple as it gets. It also features the classical UNIX Ports tree. What is it? If you ever used Gentoo or anything similar this might be a bit familiar. There is a directory in the hierarchy called ‘/usr/ports’. It contains a bunch of Makefiles and Check sums and the like. It contains recipes on how to obtain packages ported over to FreeBSD. Let’s say I want to install neovim. I go to the ‘/usr/ports/editors/neovim’ directory and as the root user simply call ‘make’ and ‘make install’. This will fetch all the source codes and source codes for dependencies unless installed and compiles them. Prior to that it prompts you about certain option you might want to tweak (such as whether or not to include support for plugins written in python) and you’re done. Well after you compile it of course which might take time. But you can be sure that there is nothing wrong with the binary since you compiled a trusted source code yourself. It can also have other benefits such as better optimisation for your particular architecture and excluding features you won’t use anyway. Great now you know to install software. But what is there to install?\nSoftware availability I have not had any issues in this regard but then again I am not that difficult to please. I mostly use terminal applications which are ported to just about anything. But should you want it is possible to get GNOME or KDE Plasma running without too much hassle. The majority of software is ported to FreeBSD and it is usually not too difficult to port it. If well written it might be as little as modifying some paths in Makefiles. Also FreeBSD should now be Linux binary compatible meaning that you can run Linux binaries natively. To do that you have to tweak a few things but is very well documented as most things in BSDs.\nHow about games? Let’s address the elephant in the room. Can it run Steam? Well it should be possible through the Linux binary compatibility layer. I haven’t tried it myself as I was not using it even under GNU/Linux as I barely play anything anymore. If I do it is usually some (usually old) RTS or FPS and it does run open-source quake and doom engines quite fine and for some newer stuff there is 0 A.D. and I care very little about anything else.\nMy Favourite Features Documentation The level of documentation on all BSD systems is something to strive for in all software projects in my opinion. The manual pages are well written and on point since people actually depend on them rather than searching how to do something on the Internet. There is also the FreeBSD handbook that contains very useful information on just about anything you might want to do. It is surprisingly detailed and focuses on just about anything even a complete beginner to UNIXes might be confused about. It includes a very detailed walk-through of the installation and anything you might want to do after that. It even includes information about what is a shell, how to use it, file permissions and much more. I dare say if you don’t mind reading manuals FreeBSD might even be more approachable than some of the minimalist GNU/Linux distributions. You will learn more this way in my opinion anyway.\nLet’s put VS Code where it belongs… in a jail FreeBSD has this neat feature called jails. Those are basically containers before everybody was using them. Or lightweight Virtual Machines. You run a programme inside chroot environment limiting its access to the file-system. It is a way to make programmes even more secure. I personally haven’t used it yet. But I might pretty soon. Oh and please do not run VS Code in a jail. Do not run it period.\nThe Z File-system FreeBSD Has really good support of a very modern file system called ZFS. It uses balanced trees and has amazing support for software raid. It contains many very advanced methods for managing the file-system such as deduplication which reduces the necessary space if storing more copies of the same or very similar file (This can be for example very useful for mail servers and group e-mails). It is very easy to work with. Do backups, hot-swap drives and so on. It is based on the file-system originally developed by Sun Microsystems.\nHave a great day and keep computing fun.\n",
  "wordCount" : "1430",
  "inLanguage": "en",
  "datePublished": "2021-09-04T14:19:08+02:00",
  "dateModified": "2021-09-04T14:19:08+02:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://tadeas-vintrlik.github.io/blog/gemini/the-beauty-and-beastie/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Vintrlik Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://tadeas-vintrlik.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://tadeas-vintrlik.github.io" accesskey="h" title="Vintrlik Blog (Alt + H)">Vintrlik Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      The Beauty and Beastie
    </h1>
    <div class="post-meta"><span title='2021-09-04 14:19:08 +0200 CEST'>September 4, 2021</span>

</div>
  </header> 
  <div class="post-content"><p>As I mentioned in my last article I have a FreeBSD box running FTP as a file
server. I use for my personal media, source codes, scripts and share it like
this between all my other computers. While this site is (as of yet) running on
Debian I have considered FreeBSD to be much more pleasant on the server side of
things.</p>
<p>I have however never run FreeBSD as a daily driver desktop and decided that it
was time to give that a go.</p>
<h2 id="my-history-with-bsd">My history with *BSD<a hidden class="anchor" aria-hidden="true" href="#my-history-with-bsd">#</a></h2>
<p>Quite some time after using Linux, actually realising that it is GNU/Linux and
what GNU is and the entire history of UNIX-like systems have I found out about
BSD (Berkeley Software Distribution). It was an operating system which soon
spawned a number of descendant systems. FreeBSD being one of them.</p>
<p>There are of course many other but three others in particular I consider worth
mentioning OpenBSD, NetBSD and DragonflyBSD. Dragonfly focuses on
multi-threaded performance and was forked from FreeBSD over a dispute about it.
It also uses a modern file-system called HAMMER. I personally never used it.
Then there is NetBSD which focuses on clean code and portability to many
architectures being used in embedded devices frequently. I also have never used
it. Then there is OpenBSD which was forked from NetBSD and its first and
foremost goal is security. They make the system secure to the point of being
unusable sometimes.  Multi-threading is disabled by default, the kernel is
re-linked randomly every time to avoid exploits and so on. I did run it for a
little while on my thinkpad laptop but the lack of software and the performance
made me jump right back after about a month.</p>
<h2 id="why-freebsd">Why FreeBSD?<a hidden class="anchor" aria-hidden="true" href="#why-freebsd">#</a></h2>
<p>I believe that it is the most supported and most suited to be used as a desktop
out of all of the *BSDs. Why use BSD over GNU/Linux? My biggest reason is
probably simplicity. Not as in user friendliness but the pure essence of UNIX.
Keeping it simple to the core.</p>
<h3 id="init-system">Init system<a hidden class="anchor" aria-hidden="true" href="#init-system">#</a></h3>
<p>I don&rsquo;t exactly hate SystemD as some people do. It can be pretty decent for
some very intricate server stuff. But for the majority of things it is an
absolute overkill and I&rsquo;ll gladly take something else. FreeBSD uses a very
simple and minimalist init system called just &lsquo;init&rsquo;. It uses scripts located
in the &lsquo;/etc/rc.d&rsquo; folder and simply starts processes as it is supposed to do.
It does very little else. There is simple script called &lsquo;service&rsquo; used to
control different services and that&rsquo;s it.</p>
<h3 id="directory-hierarchy">Directory hierarchy<a hidden class="anchor" aria-hidden="true" href="#directory-hierarchy">#</a></h3>
<p>The directory hierarchy in GNU/Linux can be a little messy at times. It is not
quite so bad as to interfere with work but after seeing the BSD hierarchy it
certainly leaves a bit to be desired. There is a total of 44 files in the
FreeBSD &lsquo;/bin&rsquo; folder. Only the absolutes necessities to keep the system
running. The rest can be found in &lsquo;/usr/bin&rsquo; and &lsquo;/usr/local/bin&rsquo; where all the
user executables are kept. Does this actually improve anything? Not by much but
it is much cleaner an everything has its place.</p>
<h2 id="its-basically-like-linux-right">It&rsquo;s basically like Linux, right?<a hidden class="anchor" aria-hidden="true" href="#its-basically-like-linux-right">#</a></h2>
<p>Well yes and no. For the most part it will feel very familiar but it is the
little differences that can knock you out of the balance sometimes.</p>
<h3 id="where-theres-a-shell-theres-a-way">Where there&rsquo;s a shell, there&rsquo;s a way<a hidden class="anchor" aria-hidden="true" href="#where-theres-a-shell-theres-a-way">#</a></h3>
<p>True enough as FreeBSD runs a rewrite of the original Bourne Shell. You might
be familiar with the Bourne Again Shell or bash for short. Well this is sh. The
portable POSIX shell in all its glory. There is also csh or C Shell out of the
box. While I find sh to be quite enough for me even for interactive use I can
understand some people might want more comfort. It is of course very easy to
install others: Bash, Zsh and should you want it Fish (God forbid). Speaking of
which&hellip;</p>
<h3 id="package-management">Package management<a hidden class="anchor" aria-hidden="true" href="#package-management">#</a></h3>
<p>The FreeBSD package manager is called &lsquo;pkg&rsquo;. To install a package you type &lsquo;pkg
install name&rsquo; to search &lsquo;pkg search name&rsquo; to remove &lsquo;pkg remove name&rsquo;. You get
the idea. As simple as it gets. It also features the classical UNIX Ports tree.
What is it? If you ever used Gentoo or anything similar this might be a bit
familiar. There is a directory in the hierarchy called &lsquo;/usr/ports&rsquo;. It
contains a bunch of Makefiles and Check sums and the like. It contains recipes
on how to obtain packages ported over to FreeBSD. Let&rsquo;s say I want to install
neovim. I go to the &lsquo;/usr/ports/editors/neovim&rsquo; directory and as the root user
simply call &lsquo;make&rsquo; and &lsquo;make install&rsquo;. This will fetch all the source codes and
source codes for dependencies unless installed and compiles them. Prior to that
it prompts you about certain option you might want to tweak (such as whether or
not to include support for plugins written in python) and you&rsquo;re done. Well
after you compile it of course which might take time. But you can be sure that
there is nothing wrong with the binary since you compiled a trusted source code
yourself. It can also have other benefits such as better optimisation for your
particular architecture and excluding features you won&rsquo;t use anyway. Great now
you know to install software. But what is there to install?</p>
<h2 id="software-availability">Software availability<a hidden class="anchor" aria-hidden="true" href="#software-availability">#</a></h2>
<p>I have not had any issues in this regard but then again I am not that difficult
to please. I mostly use terminal applications which are ported to just about
anything. But should you want it is possible to get GNOME or KDE Plasma running
without too much hassle. The majority of software is ported to FreeBSD and it
is usually not too difficult to port it. If well written it might be as little
as modifying some paths in Makefiles. Also FreeBSD should now be Linux binary
compatible meaning that you can run Linux binaries natively. To do that you
have to tweak a few things but is very well documented as most things in BSDs.</p>
<h3 id="how-about-games">How about games?<a hidden class="anchor" aria-hidden="true" href="#how-about-games">#</a></h3>
<p>Let&rsquo;s address the elephant in the room. Can it run Steam? Well it should be
possible through the Linux binary compatibility layer. I haven&rsquo;t tried it
myself as I was not using it even under GNU/Linux as I barely play anything
anymore. If I do it is usually some (usually old) RTS or FPS and it does run
open-source quake and doom engines quite fine and for some newer stuff there is
0 A.D. and I care very little about anything else.</p>
<h2 id="my-favourite-features">My Favourite Features<a hidden class="anchor" aria-hidden="true" href="#my-favourite-features">#</a></h2>
<h3 id="documentation">Documentation<a hidden class="anchor" aria-hidden="true" href="#documentation">#</a></h3>
<p>The level of documentation on all BSD systems is something to strive for in all
software projects in my opinion. The manual pages are well written and on point
since people actually depend on them rather than searching how to do something
on the Internet. There is also the FreeBSD handbook that contains very useful
information on just about anything you might want to do. It is surprisingly
detailed and focuses on just about anything even a complete beginner to UNIXes
might be confused about. It includes a very detailed walk-through of the
installation and anything you might want to do after that.  It even includes
information about what is a shell, how to use it, file permissions and much
more. I dare say if you don&rsquo;t mind reading manuals FreeBSD might even be more
approachable than some of the minimalist GNU/Linux distributions. You will
learn more this way in my opinion anyway.</p>
<h3 id="lets-put-vs-code-where-it-belongs-in-a-jail">Let&rsquo;s put VS Code where it belongs&hellip; in a jail<a hidden class="anchor" aria-hidden="true" href="#lets-put-vs-code-where-it-belongs-in-a-jail">#</a></h3>
<p>FreeBSD has this neat feature called jails. Those are basically containers
before everybody was using them. Or lightweight Virtual Machines. You run a
programme inside chroot environment limiting its access to the file-system. It
is a way to make programmes even more secure. I personally haven&rsquo;t used it yet.
But I might pretty soon. Oh and please do not run VS Code in a jail. Do not run
it period.</p>
<h3 id="the-z-file-system">The Z File-system<a hidden class="anchor" aria-hidden="true" href="#the-z-file-system">#</a></h3>
<p>FreeBSD Has really good support of a very modern file system called ZFS. It
uses balanced trees and has amazing support for software raid. It contains many
very advanced methods for managing the file-system such as deduplication which
reduces the necessary space if storing more copies of the same or very similar
file (This can be for example very useful for mail servers and group e-mails).
It is very easy to work with. Do backups, hot-swap drives and so on. It is
based on the file-system originally developed by Sun Microsystems.</p>
<blockquote>
<p>Have a great day and keep computing fun.</p>
</blockquote>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://tadeas-vintrlik.github.io">Vintrlik Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
